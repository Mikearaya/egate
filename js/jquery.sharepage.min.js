/* SharePage 1.1.1 by Michael Hohlovich */
!function(e){var n=function(n){return this.each(function(){var t=e.extend({networks:["linkedin","facebook","twitter","googleplus"],url:window.location.href,title:"",source:"",width:500,height:500,design:"buttons"},n),o=f(t.networks);o.length>0&&(w(o,t.url),g(o,t.url,t.title,t.source,t.width,t.height));var r;switch(t.design){case"buttons":r="share-buttons";break;case"links":r="share-links";break;case"icons":r="share-icons";break;default:r=""}e(this).addClass("share-page").addClass(r).html(o)})},t=function(){return this.each(function(){e(this).find(".network").each(function(n,t){e(t).off("click")}),e(this).empty()})},o={init:n,destroy:t};e.fn.sharepage=function(n){return o[n]?o[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.SharePage"):o.init.apply(this,arguments)};var r=function(n,t){e.ajax({url:"https://www.linkedin.com/countserv/count/share?url="+encodeURIComponent(n)+"&format=jsonp",dataType:"jsonp",success:function(e){e?t(e.count):this.error()},error:function(e,n){t("")}})},a=function(e,n,t){return"http://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(e)+"&title="+encodeURIComponent(t)+"&source="+encodeURIComponent(n)},c=function(n,t){e.ajax({url:"https://graph.facebook.com/?id="+n,success:function(e){if(e===Object(e)){var n;null!=(n=e.share)&&t(e.share.share_count)}else this.error()},error:function(e,n){t("")}})},s=function(e,n,t){return"http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(e)+"&t="+encodeURIComponent(t)},i=function(e,n,t){return"http://www.twitter.com/intent/tweet?url="+encodeURIComponent(e)+"&via="+encodeURIComponent(n)+"&text="+encodeURIComponent(t)};window.VK={};var u=function(n,t){window.VK.Share={count:function(e,n){t(n)}},e.ajax({url:"https://vkontakte.ru/share.php?act=count&index=1&url="+encodeURIComponent(n),dataType:"jsonp"}).done(function(e){})},h=function(e,n,t){return"http://vk.com/share.php?url="+encodeURIComponent(e)},l=function(n,t){var o={method:"pos.plusones.get",id:n,params:{nolog:!0,id:n,source:"widget",userId:"@viewer",groupId:"@self"},jsonrpc:"2.0",key:"p",apiVersion:"v1"};e.ajax({type:"POST",url:"https://clients6.google.com/rpc",processData:!0,contentType:"application/json",data:JSON.stringify(o),success:function(e){t(e.result.metadata.globalCounts.count)},error:function(){t("")}})},p=function(e,n,t){return"http://plus.google.com/share?url="+encodeURIComponent(e)},d={linkedin:{name:"LinkedIn",counter:!0,getShares:r,shareUrl:a},facebook:{name:"Facebook",counter:!0,getShares:c,shareUrl:s},twitter:{name:"Twitter",counter:!1,shareUrl:i},googleplus:{name:"Google Plus",counter:!0,getShares:l,shareUrl:p},vk:{name:"ВКонтакте",counter:!0,getShares:u,shareUrl:h}},f=function(e){var n=[];return e.forEach(function(e,t){d[e]&&n.push(m(e))}),n},m=function(n){var t=e("<div class='network' />").addClass(n).attr("data-network",n),o=e("<span class='title' />").text(d[n].name);if(t.html(o),d[n].counter){var r=e("<span class='counter' />").text(0);t.append(r)}return t},w=function(e,n){e.forEach(function(e,t){var o=e.data("network");"function"==typeof d[o].getShares&&d[o].getShares(n,function(n){e.find(".counter").html(k(n))})})},g=function(e,n,t,o,r,a){e.forEach(function(e,c){var s=e.data("network"),i=d[s].shareUrl(n,o,t);e.on("click",function(e){window.open(i,"","menubar=no, toolbar=no, resizable=yes, scrollbars=yes, width="+r+", height="+a)})})},k=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}(jQuery);
